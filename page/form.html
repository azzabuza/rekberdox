<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>IDRekber - Formulir Rekber</title>
<!-- PLUGIN -->
<link href="../asset/css/global.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
<main class="content-wrapper">
<section class="header" id="header"></section>
<section class="panel">
<div class="panel-content">
<h2>Lengkapi Formulir</h2>
<p>Silahkan isi semua data dengan benar dan cek kembali data sebelum melakukan submit</p>
</div>
</section>
<section class="shopping">
<form id="shoppingForm" class="shopping-form" itemscope itemtype="https://schema.org/shopping">
<div class="shopping-side">
<h3>Data Penjual</h3>
<div class="shopping-item">
<input type="text" id="name1" name="Nama Penjual" placeholder="Nama lengkap" autocomplete="off" required>
<input type="tel" id="whatsapp1" name="Nomor Penjual" placeholder="Nomor whatsapp" autocomplete="off" required>
</div>
</div>
<div class="shopping-side">
<h3>Data Pembeli</h3>
<div class="shopping-item">
<input type="text" id="name2" name="Nama Pembeli" placeholder="Nama lengkap" autocomplete="off" required>
<input type="tel" id="whatsapp2" name="Nomor Pembeli" placeholder="Nomor whatsapp" autocomplete="off" required>
</div>
</div>
<div class="shopping-side">
<h3>Data Barang</h3>
<div class="shopping-item">
<input type="text" id="product" name="Nama Barang" placeholder="Nama produk" autocomplete="off" required>
<input type="text" id="price" name="Harga Satuan" placeholder="Rp.0 (harga satuan)" autocomplete="off" required>
<input type="number" id="quantity" name="Jumlah Barang" placeholder="Jumlah barang" autocomplete="off" min="1" max="1000" required>
<select id="condition" name="Kondisi Barang" required>
<option disabled selected hidden value="">Pilih kondisi</option>
<option value="Baru">Baru</option>
<option value="Bekas">Bekas</option>
</select>
<input type="text" id="shipping-fee" name="Biaya Ongkir" placeholder="Rp.0 (Biaya ongkir)" autocomplete="off">
<input style="display:none;" type="hidden" id="unique-code" name="Kode Transaksi" value="">
</div>
</div>
<div class="shopping-data">
<table>
<tr>
<td style="font-weight:500;">Biaya Admin</td>
<td><input type="text" id="admin-fee" name="Biaya Admin" value="0" readonly></td>
</tr>
<tr>
<td style="font-weight:500;">Total</td>
<td><input type="text" id="total" name="Total" value="0" readonly></td>
</tr>
</table>
</div>
<div class="shopping-action">
<button type="submit" class="shopping-button">Buat Transaksi</button>
<div id="waiting-process" style="display:none;">Tunggu.</div>
</div>
</form>
</section>
<section class="info-payment"></section>
<section class="footer" id="footer"></section>
</main>
<script>
document.getElementById('downloadPdf').addEventListener('click', function () {
    // Ambil konten data transaksi
    const paymentContent = document.querySelector('.payment-content');
    
    // Periksa jika konten tidak ada
    if (!paymentContent) {
        alert('Data transaksi tidak ditemukan!');
        return;
    }

    // Inisialisasi jsPDF
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // Menambahkan judul ke PDF
    doc.setFontSize(18);
    doc.text('Data Transaksi', 10, 10);

    let yPosition = 20; // Posisi vertikal di PDF untuk elemen berikutnya

    // Ambil tabel data transaksi dari elemen .data-payment
    const tables = paymentContent.querySelectorAll('.data-payment table');
    tables.forEach((table) => {
        const rows = table.querySelectorAll('tr');
        rows.forEach((row) => {
            const cells = row.querySelectorAll('td');
            const label = cells[0].textContent;
            const value = cells[1].textContent;

            // Menambahkan setiap baris data transaksi ke PDF
            doc.setFontSize(12);
            doc.text(`${label}: ${value}`, 10, yPosition);
            yPosition += 10;
        });
        yPosition += 10; // Spasi antar tabel
    });

    // Menambahkan konfirmasi (link) jika ada
    const confirmationLink = document.getElementById('confirmation');
    doc.text(`Konfirmasi: ${confirmationLink ? confirmationLink.href : ''}`, 10, yPosition);

    // Unduh PDF
    doc.save('data-transaksi.pdf');
});
</script>
<script src="../asset/js/tbot.js"></script>
<script src="../asset/js/form.js"></script>
<script src="../asset/js/global.js"></script>
</body>
</html>
